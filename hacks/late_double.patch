--- ./build/graphviz-src/lib/common/utils.c	2016-12-08 05:43:20.000000000 +0000
+++ utils.c	2019-07-29 23:35:27.329000000 +0000
@@ -11,6 +11,7 @@
  * Contributors: See CVS logs. Details at http://www.graphviz.org/
  *************************************************************************/
 
+#include <emscripten.h>
 #include "render.h"
 #include "agxbuf.h"
 #include "htmltable.h"
@@ -94,8 +95,14 @@
 	return def;
     rv = strtod (p, &endp);
     if (p == endp) return def;  /* invalid double format */
-    if (rv < low) return low;
-    else return rv;
+    if (rv < low) {
+        /* Workaround for iOS Safari: late_double() returning low
+         * even if rv exceeds it; presumably a WASM compiler bug.
+         * JavaScript callout prevents certain optimizations; doesn't
+         * affect performance since this branch is usually skipped. */
+        EM_ASM();
+        return low;
+    } else return rv;
 }
 
 /* get_inputscale:
